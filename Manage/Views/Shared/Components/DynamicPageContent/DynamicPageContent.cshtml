@using Core.Constants.File
@using Core.Models
@using Manage.Tools.FileHandler.Abstraction
@using Manage.ViewModels.ViewComponent
@using Core
@using System.Globalization

@model IEnumerable<DynamicPageContent>
@inject IUnitOfWork _unitOfWork
@inject IFileService _fileService

@{
    var currentCulture = CultureInfo.CurrentUICulture.TwoLetterISOLanguageName;
}

<!--------------------------- Pages Contents --------------------------->
<div id="g-pages-component-section">
    @foreach (var content in Model)
    {
        <div class="g-pages-component-element">
            <div class="g-pages-component-element-wrapper">
                <div class="g-pages-component-element-content">
                    @if (@content.IsContentTitle)
                    {
                        <h2 class="g-pages-component-element-content-title">
                            @Html.Raw(@_unitOfWork.Languages.ChooseLanguage(content, "ContentTitle", currentCulture))
                        </h2>
                    }
                    <div class="g-pages-component-element-content-text">
                        @Html.Raw(@_unitOfWork.Languages.ChooseLanguage(content, "Content", currentCulture))
                    </div>
                </div>
                <div class="g-pages-component-element-image">
                    <img src="@_fileService.GetFileUrl(content.ContentPhotoName, FilePath.DynamicPage)" asp-append-version="true">
                </div>
            </div>
        </div>
    }
</div>
<!--------------------------- Pages Contents --------------------------->